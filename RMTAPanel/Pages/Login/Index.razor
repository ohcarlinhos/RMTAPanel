@page "/login"
@attribute [AllowAnonymous]

<PageTitle>Acessar</PageTitle>

<MudContainer MaxWidth="MaxWidth.ExtraSmall" Class="mt-20">
    <AuthorizeView>
        <Authorized>
            <MudStack Justify="Justify.Center">
                <MudText>Desaja sair?</MudText>
                <MudButton Variant="Variant.Filled" OnClick="@Logout">Sair</MudButton>
            </MudStack>
        </Authorized>
        
        <NotAuthorized>
            <LoginForm/>
        </NotAuthorized>
    </AuthorizeView>
</MudContainer>

@code {
    [Inject] ILocalStorageService? LocalStorage { get; set; }
    [Inject] AuthenticationStateProvider? AuthProvider { get; set; }

    async Task Logout()
    {
        await LocalStorage!.RemoveItemAsync("jwt_token");
        await AuthProvider!.GetAuthenticationStateAsync();
    }

}