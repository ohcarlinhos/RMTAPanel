@using Shared.User

<MudDialog>
    <TitleContent>
        <TitleModal Label="Editar usuÃ¡rio"/>
    </TitleContent>

    <DialogContent>
        <EditForm Model="@_userDto" OnValidSubmit="@SubmitForm">
            <MudTextField
                @bind-Value="_userDto.Name"
                Label="Nome"
                InputType="InputType.Text"
                For="@(() => _userDto.Name)"/>

            <MudTextField
                @bind-Value="_userDto.Email"
                Label="Email"
                InputType="InputType.Email"
                For="@(() => _userDto.Email)"/>

            <MudStack Justify="Justify.FlexEnd" Row="true" Class="mt-5">
                <MudButton OnClick="@Cancel">Cancelar</MudButton>
                <MudButton ButtonType="ButtonType.Submit">Atualizar</MudButton>
            </MudStack>
        </EditForm>
    </DialogContent>
</MudDialog>

@code {
    [CascadingParameter] private MudDialogInstance? MudDialog { get; set; }
    [Parameter] public UserMap User { get; set; } = new ();

    private UpdateUserDto _userDto = new();

    protected override void OnParametersSet()
    {
        _userDto = new()
        {
            Name = User.Name,
            Email = User.Email,
        };
    }

    private void SubmitForm()
    {
        Console.WriteLine("#submit");
    }

    private void Cancel() => MudDialog!.Cancel();
}